---
import SidebarNavLink from "./SidebarNavLink.astro";
import { email } from "../data/me";
import avatarImg from "../assets/avatar.png";
import { Image } from "astro:assets";

interface Props {
	mainClass?: string;
}

const { mainClass } = Astro.props;
const NameComp = mainClass === "home" ? "h1" : "div";
---

<header
	itemscope=""
	itemtype="https://schema.org/Person https://schema.org/Organization"
	id="mdata-author"
	itemid="mdata-author"
	itemprop="author publisher"
	class="main-sidebar stack h-card"
>
	<a
		class="u-url u-uid self_link"
		rel="home"
		href="/"
		itemref="mdata-blog mdata-author"
		itemprop="url identifier"
	>
		<span class="desktop-only">Ol√° üëãüèæ, eu sou<br /></span>
		<NameComp class="p-name" itemprop="name">
			Victor<br class="desktop-only" /> Magalh√£es
		</NameComp>
	</a>

	<div hidden>
		<Image class="u-photo" src={avatarImg} alt="Eu!" />
	</div>

	<div class="inline-mobile no-stack-margin">
		<span class="p-x-pronoun-nominative">ele</span>/<span class="p-x-pronoun-possessive"
			>dele</span
		>
	</div>

	<address class="inline-mobile no-stack-margin" itemprop="email">
		<a class="u-email" href={`mailto:${email}`}>{email}</a>
	</address>

	<div>vidas negras importam, vidas LGBT importam e √© fascismo sim</div>

	<form action="/search" role="search">
		<label aria-label="Buscar via DuckDuckGo">
			<input name="q" placeholder="Buscar via DuckDuckGo" />
		</label>
	</form>

	<nav aria-label="Principal">
		<ul>
			<li>
				<SidebarNavLink href="/" isExact>home</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/posts" isDirectory>posts</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/bookmarks" isDirectory>recomenda√ß√µes</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/notes" isDirectory>notas</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/apresentacoes" isDirectory>apresenta√ß√µes</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/blogroll">blogroll</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/work">trabalho</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/ouvido">ouvido</SidebarNavLink>
			</li>
			<li>
				<SidebarNavLink href="/assistido">assistido</SidebarNavLink>
			</li>
		</ul>
	</nav>

	<div class="stack2 desktop-only" style="--stack-margin-2: var(--s-2)">
		<details class="me-elsewhere">
			<summary>M√≠dias sociais</summary>
			<address>
				<a
					rel="alternate"
					href="/feed.all.xml"
					itemprop="sameAs"
					title="RSS"
					aria-label="RSS"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512"
					>
						<path
							fill="currentColor"
							d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://sunbeam.city/@vhfmag"
					itemprop="sameAs"
					title="Mastodon"
					aria-label="Mastodon"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512"
					>
						<path
							fill="currentColor"
							d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://gitlab.com/vhfmag/"
					itemprop="sameAs"
					title="Gitlab"
					aria-label="Gitlab"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 512 512"
					>
						<path
							fill="currentColor"
							d="M105.2 24.9c-3.1-8.9-15.7-8.9-18.9 0L29.8 199.7h132c-.1 0-56.6-174.8-56.6-174.8zM.9 287.7c-2.6 8 .3 16.9 7.1 22l247.9 184-226.2-294zm160.8-88l94.3 294 94.3-294zm349.4 88l-28.8-88-226.3 294 247.9-184c6.9-5.1 9.7-14 7.2-22zM425.7 24.9c-3.1-8.9-15.7-8.9-18.9 0l-56.6 174.8h132z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://getpocket.com/@vhfmag"
					itemprop="sameAs"
					title="Pocket"
					aria-label="Pocket"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512"
					>
						<path
							fill="currentColor"
							d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://github.com/vhfmag/"
					itemprop="sameAs"
					title="Github"
					aria-label="Github"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 496 512"
					>
						<path
							fill="currentColor"
							d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://www.linkedin.com/in/vhfmag"
					itemprop="sameAs"
					title="LinkedIn"
					aria-label="LinkedIn"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512"
					>
						<path
							fill="currentColor"
							d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://twitter.com/vhfmag"
					itemprop="sameAs"
					title="Twitter"
					aria-label="Twitter"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 512 512"
					>
						<path
							fill="currentColor"
							d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://medium.com/@vhfmag"
					itemprop="sameAs"
					title="Medium"
					aria-label="Medium"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512"
					>
						<path
							fill="currentColor"
							d="M0 32v448h448V32H0zm372.2 106.1l-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://instagram.com/vhfmag"
					itemprop="sameAs"
					title="Instagram"
					aria-label="Instagram"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512"
					>
						<path
							fill="currentColor"
							d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"
						></path>
					</svg>
				</a>
				<a
					rel="me noopener noreferrer"
					href="https://bsky.app/profile/vhfmag.dev"
					itemprop="sameAs"
					title="Bluesky"
					aria-label="Bluesky"
				>
					<svg
						aria-hidden="true"
						focusable="false"
						role="img"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 600 530"
					>
						<path
							fill="currentColor"
							d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"
						></path>
					</svg>
				</a>
			</address>
		</details>

		<details class="theme-selector-wrapper" id="theme-selector-wrapper">
			<summary>Tema</summary>

			<fieldset class="theme-selector-buttons">
				<legend class="visually-hidden">Tema</legend>

				<label class="button theme-button theme-button--auto" data-theme="auto">
					<input type="radio" name="theme" class="visually-hidden" />
					 Autom√°tico
				</label>
				<label class="button theme-button" data-theme="dark">
					<input type="radio" name="theme" class="visually-hidden" />
					 Escuro
				</label>
				<label class="button theme-button" data-theme="light">
					<input type="radio" name="theme" class="visually-hidden" />
					 Claro
				</label>
			</fieldset>
		</details>
	</div>
</header>

<script>
	function setTheme(theme: string) {
		document.body.dataset.theme = theme;
		localStorage.setItem("theme", theme);
	}

	function loadTheme() {
		if (typeof localStorage !== "undefined") {
			const persistedTheme = localStorage.getItem("theme");

			if (persistedTheme) {
				setTheme(persistedTheme);
			}
		}
	}

	function onLoad() {
		loadTheme();
		const wrapper = document.getElementById("theme-selector-wrapper");

		if (wrapper) {
			const buttons = wrapper.querySelectorAll(".theme-button input");
			buttons.forEach(button =>
				button.addEventListener("input", () => {
					const theme = button.parentElement?.dataset.theme;
					if (theme) setTheme(theme);
				}),
			);
		}
	}

	window.addEventListener("load", onLoad);
	loadTheme();
</script>

<style>
	header {
		width: var(--sidebar-width);

		text-align: right;

		--stack-margin: var(--s0);
	}

	hr {
		border-color: var(--themeColor);
	}

	nav > ul {
		list-style-type: none;
		margin: 0;
		padding: 0;
	}

	nav > ul li + li {
		margin-top: calc(var(--stack-margin) / 4);
	}

	nav a {
		font-weight: normal;
	}

	nav a.current {
		font-variation-settings: "wght" 700;
	}

	.theme-selector-wrapper {
		display: flex;
		flex-wrap: wrap;
		justify-content: space-between;
		flex-direction: column;
	}

	.theme-selector-buttons {
		all: unset;

		display: flex;
		flex-direction: column;

		display: grid;
		grid-auto-flow: row;
		gap: var(--s-3);
	}

	.theme-button {
		color: var(--themeColor);
		background-color: var(--backgroundColor);
	}

	.theme-button:focus-within {
		outline: 1px dotted currentColor;
		outline-offset: -0.25em;
	}

	.theme-button--auto {
		display: none;
	}

	@media (prefers-color-scheme: dark), not (prefers-color-scheme: dark) {
		.theme-button--auto {
			display: inherit;
		}
	}

	header :any-link {
		color: var(--themeColor);
		border-bottom: none;
	}

	.self_link {
		font-variation-settings: "wght" 600;
		text-decoration: none;
		line-height: 1.1;
	}

	header .self_link:any-link {
		font-variation-settings: "wght" 350;
		text-decoration: none;
		line-height: 1.1;
	}

	.self_link .p-name {
		font-size: 2rem;
		font-family: var(--heading-font-family);
		font-weight: bold;
		font-variation-settings: "wght" 700;
		line-height: var(--h1-line-height);
	}

	:global(body[data-theme="auto"]) .theme-button[data-theme="auto"],
	:global(body[data-theme="dark"]) .theme-button[data-theme="dark"],
	:global(body[data-theme="light"]) .theme-button[data-theme="light"] {
		color: var(--backgroundColor);
		background-color: var(--themeColor);
	}

	details ul {
		text-align: left;
	}

	.me-elsewhere address {
		padding: var(--s-2);
		display: grid;
		grid-template-columns: repeat(auto-fit, 1.5em);
		grid-gap: var(--s-1);
		place-content: center;
		align-items: center;
	}

	form label {
		display: block;
	}

	form input {
		width: 100%;
	}

	@media (min-width: 800px) {
		summary {
			direction: rtl;
		}
	}

	@media (max-width: 800px) {
		header {
			width: 100%;
			max-width: unset;
			text-align: unset;
		}

		.theme-selector-buttons {
			flex-direction: row;
			flex-wrap: wrap;
			justify-content: flex-start;

			grid-auto-flow: column;
		}

		> nav > ul {
			--list-h-gap: var(--s-2);
			--list-v-gap: var(--s-3);

			display: flex;
			flex-wrap: wrap;
			margin: calc(-1 * var(--list-v-gap)) calc(-1 * var(--list-h-gap));
		}

		> nav > ul > li {
			margin: var(--list-v-gap) var(--list-h-gap);
		}
	}

	.p-note :first-child {
		margin-top: 0;
	}

	.p-note :last-child {
		margin-bottom: 0;
	}

	.p-note dl dt {
		font-variation-settings: "wght" 500;
	}

	.p-note dl dt::after {
		content: " ";
	}

	.p-note dl dt,
	.p-note dl dd {
		display: inline;
		margin: 0;
	}

	[role="search"] input {
		border: 1px solid var(--themeColor);
		background-color: unset;
		color: var(--textColor);
		padding: 0.4em;
		border-radius: 0.2em;
	}

	[role="search"] input:focus {
		outline: 1px dotted var(--themeColor);
		outline-offset: -0.25em;
	}

	h1,
	h2 {
		margin: 0;
	}

	@media (max-width: 800px) {
		.inline-mobile {
			display: inline-block;
			margin-top: 1em;
			margin-bottom: 0.5em;
		}

		.inline-mobile + .inline-mobile::before {
			content: " - ";
		}
	}
</style>
